<div class="max-w-4xl mx-auto p-6 space-y-6">
  <!-- header / stats -->
  <div class="rounded-xl border border-white/10 bg-white/5 p-6">
    <div class="flex flex-wrap gap-3 items-center justify-between">
      <h2 class="text-xl font-bold">My Todo-list</h2>
      <div class="flex flex-wrap gap-2">
        <span
          class="px-2 py-1 text-sm rounded-full bg-emerald-500/20 text-emerald-300 border border-emerald-400/30"
        >
          {{ active().length }} Active
        </span>
        <span
          class="px-2 py-1 text-sm rounded-full bg-blue-500/20 text-blue-300 border border-blue-400/30"
        >
          {{ done().length }} Done
        </span>
        <span
          class="px-2 py-1 text-sm rounded-full bg-purple-500/20 text-purple-300 border border-purple-400/30"
        >
          {{ progress() }}% Progress
        </span>
      </div>
    </div>
  </div>

  <!-- form -->
  <div class="rounded-xl border border-white/10 bg-white/5 p-6">
    <div class="mb-4">
      <input
        [ngModel]="newText()"
        (ngModelChange)="newText.set($event)"
        [ngModelOptions]="{ standalone: true }"
        name="task"
        class="w-full rounded-lg border border-white/10 bg-white/10 px-3 py-3 outline-none focus:ring-2 ring-emerald-400/40"
        placeholder="What needs to be done?"
      />
    </div>

    <div class="grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-4">
      <div>
        <input
          [ngModel]="dueDate()"
          (ngModelChange)="dueDate.set($event)"
          [ngModelOptions]="{ standalone: true }"
          name="dueDate"
          type="date"
          class="w-full rounded-lg border border-white/10 bg-white/10 px-3 py-2 outline-none focus:ring-2 ring-emerald-400/40"
          placeholder="Due date"
        />
      </div>

      <div>
        <input
          [ngModel]="dueTime()"
          (ngModelChange)="dueTime.set($event)"
          [ngModelOptions]="{ standalone: true }"
          name="dueTime"
          type="time"
          class="w-full rounded-lg border border-white/10 bg-white/10 px-3 py-2 outline-none focus:ring-2 ring-emerald-400/40"
          placeholder="Start time"
        />
      </div>

      <div>
        <select
          [ngModel]="category()"
          (ngModelChange)="category.set($event)"
          [ngModelOptions]="{ standalone: true }"
          name="category"
          class="w-full rounded-lg border border-white/10 bg-slate-800 px-3 py-2 outline-none focus:ring-2 ring-emerald-400/40 text-white"
        >
          <option value="" disabled class="bg-slate-800">Select category</option>
          <option value="WORK" class="bg-slate-800">Work</option>
          <option value="HOME" class="bg-slate-800">Home</option>
          <option value="SCHOOL" class="bg-slate-800">School</option>
          <option value="TRAINING" class="bg-slate-800">Training</option>
          <option value="HEALTH" class="bg-slate-800">Health</option>
        </select>
      </div>

      <div>
        <select
          [ngModel]="priority()"
          (ngModelChange)="priority.set($event)"
          [ngModelOptions]="{ standalone: true }"
          name="priority"
          class="w-full rounded-lg border border-white/10 bg-slate-800 px-3 py-2 outline-none focus:ring-2 ring-emerald-400/40 text-white"
        >
          <option value="" disabled class="bg-slate-800">Set priority‚Ä¶</option>
          <option value="high" class="bg-slate-800">üî• High</option>
          <option value="medium" class="bg-slate-800">‚ö° Medium</option>
          <option value="low" class="bg-slate-800">üå± Low</option>
        </select>
      </div>
    </div>

    <div class="mt-3 grid grid-cols-1 gap-3 md:grid-cols-2">
      <input
        [ngModel]="link()"
        (ngModelChange)="link.set($event)"
        [ngModelOptions]="{ standalone: true }"
        name="link"
        type="url"
        class="w-full rounded-lg border border-white/10 bg-white/10 px-3 py-2 outline-none focus:ring-2 ring-emerald-400/40"
        placeholder="Link (optional)"
      />

      <input
        [ngModel]="note()"
        (ngModelChange)="note.set($event)"
        [ngModelOptions]="{ standalone: true }"
        name="note"
        type="text"
        class="w-full rounded-lg border border-white/10 bg-white/10 px-3 py-2 outline-none focus:ring-2 ring-emerald-400/40"
        placeholder="Note / description"
      />
    </div>

    <div class="mt-5 flex gap-3">
      <button
        (click)="add()"
        class="flex-1 rounded-lg bg-emerald-500 py-2 font-semibold text-slate-900 hover:bg-emerald-400 transition"
      >
        + Add
      </button>
      <button
        (click)="clearCompleted()"
        class="rounded-lg px-4 py-2 bg-white/10 hover:bg-white/20 transition"
      >
        Clear completed
      </button>
    </div>
  </div>

  <!-- active -->
  <div class="space-y-3">
    <h3 class="text-lg font-bold">Active</h3>
    <div
      *ngFor="let t of active()"
      class="rounded-lg border border-white/10 bg-white/5 p-4 flex items-start gap-3"
    >
      <div class="flex-1 min-w-0">
        <div class="flex items-center justify-between gap-2">
          <h4 class="font-semibold truncate">{{ t.text }}</h4>
          <div class="flex gap-1">
            <button
              (click)="toggle(t)"
              class="px-2 py-1 rounded bg-emerald-500/20 text-emerald-300 border border-emerald-500/30"
            >
              Done
            </button>
            <button
              (click)="remove(t)"
              class="px-2 py-1 rounded bg-red-500/20 text-red-300 border border-red-500/30"
            >
              Delete
            </button>
          </div>
        </div>

        <div class="mt-2 text-sm text-white/60 flex flex-wrap gap-3">
          <span *ngIf="t.dueDate">üìÖ {{ t.dueDate }}</span>
          <span *ngIf="t.dueTime">‚è±Ô∏è {{ t.dueTime }}</span>
          <a
            *ngIf="t.link"
            [href]="t.link"
            target="_blank"
            class="text-emerald-300 hover:text-emerald-200"
            >üîó Link</a
          >
        </div>

        <p *ngIf="t.note" class="mt-2 text-sm text-white/70">{{ t.note }}</p>
      </div>
    </div>

    <div *ngIf="active().length === 0" class="text-white/60">No active tasks.</div>
  </div>

  <!-- completed -->
  <div class="space-y-3">
    <h3 class="text-lg font-bold">Completed</h3>
    <div
      *ngFor="let t of done()"
      class="rounded-lg border border-white/10 bg-white/5 p-4 opacity-70"
    >
      <div class="flex items-center justify-between">
        <h4 class="font-semibold line-through">{{ t.text }}</h4>
        <button
          (click)="toggle(t)"
          class="px-2 py-1 rounded bg-blue-500/20 text-blue-300 border border-blue-500/30"
        >
          Undo
        </button>
      </div>
    </div>

    <div *ngIf="done().length === 0" class="text-white/60">No completed tasks yet.</div>
  </div>
</div>
